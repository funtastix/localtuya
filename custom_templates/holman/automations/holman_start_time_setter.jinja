{% macro holman_start_time_setter(base, entity_id, entity_start_buffer_id) %}

{% set h = states(entity_id).split(":")[0] %}
{% set m = states(entity_id).split(":")[1] | int %}
{% set d1 = ( h | int | bitwise_and(240) / 16 ) | int %}
{% set d2 = ( h | int | bitwise_and(15) * 4 ) | int %}
{% set data = namespace(items=[]) %}
{% set l = states(entity_start_buffer_id) | list %}
{% for item in l %}
  {% set data.items = data.items + [ base[item] ] %}
{% endfor %}
{% set data.items = [ data.items[0], d1, d2, m ] + data.items[4:] %}
{% set data = data.items | list %}
{{ {'data': data} | to_json }}

{% endmacro %}
